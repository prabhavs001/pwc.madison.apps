<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
    jcr:primaryType="cq:Page">
    <jcr:content
        cq:designPath="/etc/designs/acs-commons"
        jcr:description="A report allowing for displaying dita assets by path."
        jcr:primaryType="nt:unstructured"
        jcr:title="Ingestion Report"
        sling:resourceType="acs-commons/components/utilities/report-builder/report-page">
        <config
            jcr:primaryType="nt:unstructured"
            sling:resourceType="wcm/foundation/components/parsys">
            <queryconfig
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/configs/queryconfig"
                pageSize="50"
                query="SELECT * FROM [dam:Asset] AS s WHERE ISDESCENDANTNODE([{{path}}])"
                queryLanguage="JCR-SQL2"
                reportExecutor="com.adobe.acs.commons.reports.models.QueryReportExecutor"/>
        </config>
        <parameters
            jcr:primaryType="nt:unstructured"
            sling:resourceType="wcm/foundation/components/parsys">
            <pathfield
                jcr:primaryType="nt:unstructured"
                sling:resourceType="pwc-madison/components/report/pathfield"
                fieldLabel="Path"
                name="path"
                required="true"
                resourceType="granite/ui/components/foundation/form/pathbrowser"
                rootPath="/content/dam/pwc-madison/ditaroot"
                validation="root-path-validator"/>
        </parameters>
        <columns
            jcr:primaryType="nt:unstructured"
            sling:resourceType="wcm/foundation/components/parsys">
            <title
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/columns/text"
                exporter="com.adobe.acs.commons.reports.models.StringReportCellCSVExporter"
                heading="Title"
                property="jcr:content/metadata/dc:title"/>
            <last-modified-date
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/columns/date"
                exporter="com.adobe.acs.commons.reports.models.DateReportCellCSVExporter"
                format="yyyy-MM-dd HH:mm Z"
                heading="Last Modified Date"
                property="jcr:content/jcr:lastModified"/>
            <date-added
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/columns/date"
                exporter="com.adobe.acs.commons.reports.models.DateReportCellCSVExporter"
                format="yyyy-MM-dd HH:mm Z"
                heading="Date Added"
                property="jcr:created"/>
            <modified-by
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/columns/text"
                exporter="com.adobe.acs.commons.reports.models.StringReportCellCSVExporter"
                heading="Modified By"
                property="jcr:content/jcr:lastModifiedBy"/>
            <short-code
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/columns/text"
                exporter="com.adobe.acs.commons.reports.models.StringReportCellCSVExporter"
                heading="Short Code"
                property="jcr:content/metadata/pwc-shortcode"/>
            <content-type
                jcr:primaryType="nt:unstructured"
                sling:resourceType="pwc-madison/components/report/columns/select-option-ref"
                datasource="/content/pwc-madison/global/reference-data"
                exporter="com.pwc.madison.core.reports.SelectOptionCSVExporter"
                heading="Content Type"
                property="jcr:content/metadata/pwc-contentType"/>
            <content-status
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/columns/text"
                exporter="com.adobe.acs.commons.reports.models.StringReportCellCSVExporter"
                heading="Content Status"
                property="jcr:content/metadata/pwc-content-status"/>
            <document-status
                jcr:primaryType="nt:unstructured"
                sling:resourceType="acs-commons/components/utilities/report-builder/columns/text"
                exporter="com.adobe.acs.commons.reports.models.StringReportCellCSVExporter"
                heading="Document Status"
                property="jcr:content/metadata/docstate"/>
            <assetpath
                jcr:primaryType="nt:unstructured"
                sling:resourceType="pwc-madison/components/report/assetpath"
                exporter="com.adobe.acs.commons.reports.models.PathReportCellCSVExporter"
                heading="Path"
                link="true"/>
        </columns>
    </jcr:content>
</jcr:root>
